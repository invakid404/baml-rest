// ----------------------------------------------------------------------------
//
//  Welcome to Baml! To use this generated code, please run the following:
//
//  $ go get github.com/boundaryml/baml
//
// ----------------------------------------------------------------------------

// This file was generated by BAML: please do not edit it. Instead, edit the
// BAML files and re-generate this code using: baml-cli generate
// You can install baml-cli with:
//  $ go install github.com/boundaryml/baml/baml-cli

package stream_types

import (
    "encoding/json"
    "fmt"

    baml "github.com/boundaryml/baml/engine/language_client_go/pkg"
    "github.com/boundaryml/baml/engine/language_client_go/pkg/cffi"

    "github.com/invakid404/testis/baml_client/types"
)

type Union2Resume3OrResume4 struct {
    variant string
    
    variant_Resume3 *Resume3
    
    variant_Resume4 *Resume4
    
}

func (u *Union2Resume3OrResume4) Decode(holder *cffi.CFFIValueUnionVariant, typeMap baml.TypeMap) {
    valueHolder := holder.Value
    variantName := holder.VariantName
	switch variantName {
    case "Resume3":
            u.variant = "Resume3"
            value := baml.Decode(valueHolder).Interface().(Resume3)
            u.variant_Resume3 = &value
    case "Resume4":
            u.variant = "Resume4"
            value := baml.Decode(valueHolder).Interface().(Resume4)
            u.variant_Resume4 = &value
    
    default:
        panic(fmt.Sprintf("invalid union variant: %s", variantName))
	}
}


func (u Union2Resume3OrResume4) Encode() (*cffi.CFFIValueHolder, error) {
    switch u.variant {
    
    case "Resume3":
        return baml.EncodeUnion(u.BamlEncodeName, "Resume3", *u.variant_Resume3)
    
    case "Resume4":
        return baml.EncodeUnion(u.BamlEncodeName, "Resume4", *u.variant_Resume4)
    
    case "":
        return nil, fmt.Errorf("invalid union variant: [unset]")
    }

    return nil, fmt.Errorf("invalid union variant: %s", u.variant)
}

func (u Union2Resume3OrResume4) BamlTypeName() string {
    return "Union2Resume3OrResume4"
}

func (u Union2Resume3OrResume4) BamlEncodeName() *cffi.CFFITypeName {
    return &cffi.CFFITypeName{
        Name:      "Union__Resume3__Resume4",
        Namespace: cffi.CFFITypeNamespace_STREAM_TYPES,
    }
}

func (u Union2Resume3OrResume4) MarshalJSON() ([]byte, error) {
    switch u.variant {
    
    case "Resume3":
        return json.Marshal(u.variant_Resume3)
    
    case "Resume4":
        return json.Marshal(u.variant_Resume4)
    
    }

    return nil, fmt.Errorf("invalid union variant: %s", u.variant)
}

func (u *Union2Resume3OrResume4) UnmarshalJSON(data []byte) error {
    var err error
    
    err = json.Unmarshal(data, &u.variant_Resume3)
    if err == nil {
        u.variant = "Resume3"
        return nil
    } else {
        u.variant_Resume3 = nil
    }
    
    err = json.Unmarshal(data, &u.variant_Resume4)
    if err == nil {
        u.variant = "Resume4"
        return nil
    } else {
        u.variant_Resume4 = nil
    }
    
    return fmt.Errorf("invalid union variant: %s", string(data))
}


func Union2Resume3OrResume4__NewResume3(v Resume3) Union2Resume3OrResume4 {
    
    return Union2Resume3OrResume4{
        variant: "Resume3",
        variant_Resume3: &v,
    }
}

func (u *Union2Resume3OrResume4) SetResume3(v Resume3) {
    
    u.variant = "Resume3"
    u.variant_Resume3 = &v
    
    u.variant_Resume4 = nil
    
}

func (u *Union2Resume3OrResume4) IsResume3() bool {
    return u.variant == "Resume3"
}

func (u *Union2Resume3OrResume4) AsResume3() *Resume3 {
    if u.variant != "Resume3" {
        return nil
    }
    return u.variant_Resume3
}

func Union2Resume3OrResume4__NewResume4(v Resume4) Union2Resume3OrResume4 {
    
    return Union2Resume3OrResume4{
        variant: "Resume4",
        variant_Resume4: &v,
    }
}

func (u *Union2Resume3OrResume4) SetResume4(v Resume4) {
    
    u.variant = "Resume4"
    u.variant_Resume4 = &v
    
    u.variant_Resume3 = nil
    
}

func (u *Union2Resume3OrResume4) IsResume4() bool {
    return u.variant == "Resume4"
}

func (u *Union2Resume3OrResume4) AsResume4() *Resume4 {
    if u.variant != "Resume4" {
        return nil
    }
    return u.variant_Resume4
}
